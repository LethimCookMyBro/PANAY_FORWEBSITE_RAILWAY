# ========== Runtime mode ==========
APP_ENV=development

# ========== Database & Ollama (ใช้ค่าตามนี้ได้เลย) ==========
# Preferred: set DATABASE_URL directly
DATABASE_URL=postgresql://user:password@postgres:5432/plcnextdb
# Fallback (if DATABASE_URL is empty/placeholder): provide all PG vars below
# PGHOST=postgres
# PGPORT=5432
# PGUSER=user
# PGPASSWORD=password
# PGDATABASE=plcnextdb
# Invalid example (do not use): DATABASE_URL=${DATABASE_URL}

OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=llama3.2
JWT_SECRET=replace-with-a-long-random-secret
# Invalid example (do not use in production): JWT_SECRET=dev-secret

# ========== Embeddings (ใช้ค่าตามนี้ได้เลย) ==========
EMBED_MODEL=BAAI/bge-m3
EVAL_EMBED_MODEL=sentence-transformers/all-MiniLM-L6-v2
RAGAS_EMBED_MODEL_EVAL=sentence-transformers/all-MiniLM-L6-v2

# Auto-ingest knowledge files (.pdf/.json) into SQL(pgvector)
AUTO_EMBED_KNOWLEDGE=true
# Single-service image path on Railway:
KNOWLEDGE_DIR=/app/backend/data/Knowledge
# Optional tuning
AUTO_EMBED_BATCH_SIZE=1000
AUTO_EMBED_CHUNK_SIZE=800
AUTO_EMBED_CHUNK_OVERLAP=150
# Set true to rescan all files even if source names already exist in DB
AUTO_EMBED_FORCE_RESCAN=false

AUTO_SEED_GOLDEN_QA=true
GOLDEN_QA_PATH=/app/data/Knowledge/golden_qa.json

# ========== RAGAS (LLM judge) (ใช้ค่าตามนี้ได้เลย) ==========
ENABLE_RAGAS_LLM=true
RAGAS_LLM_PROVIDER=ollama
RAGAS_LLM_MODEL=phi3:mini
RAGAS_NUM_CTX=256
RAGAS_NUM_PREDICT=16
RAGAS_LLM_TEMPERATURE=0.0
RAGAS_TOP_K=1
RAGAS_TOP_P=0.05
RAGAS_REPEAT_PENALTY=1.05
RAGAS_CONTEXTS_K=3
RAGAS_CONTEXT_MAX_CHARS=240
RAGAS_TIMEOUT=120
RAGAS_BUDGET_S=110
RAGAS_MAX_WORKERS=1
DEFAULT_FAST_RAGAS=true
ENABLE_BACKGROUND_RAGAS=false
EVAL_WITH_RAGAS=true
# Chat-time RAGAS uses retrieved SQL contexts
ENABLE_CHAT_RAGAS=true

# Append deterministic source/page citations to final answer
APPEND_SOURCE_CITATIONS=true

# ========== Chunking (ใช้ค่าตามนี้ได้เลย) ==========
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MIN_CHUNK_LENGTH=30

# RERANK (ใช้ค่าตามนี้ได้เลย)
USE_RERANK_DEFAULT=true
RETRIEVE_LIMIT=50
RERANK_CANDIDATES_MAX=32
RERANK_TOPN=8

# ========== (ไม่บังคับ) ถ้าคุณต้องการใช้ OpenAI API ==========
# ถ้าจะใช้ ให้ลบเครื่องหมาย # ข้างหน้า แล้วใส่ "คีย์ลับ" ของคุณ
# !! ห้ามใส่คีย์ลับของคุณลงในไฟล์ .env.example ที่จะ commit ขึ้น Git !!
# OPENAI_API_KEY=sk-YOUR-SECRET-KEY-GOES-HERE
# OPENAI_MODEL=gpt-4o-mini
# RAGAS_LLM_PROVIDER=openai
